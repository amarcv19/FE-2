<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Book a meeting</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <!-- // form element for the user data  -->
    <form action="" id="user-data">
      <!-- heading for the entire form  -->
      <h2>Book a session</h2>

      <!-- description of meeting -->
      <p>Fiill in the form below to book a virtual session with your doctor.</p>

      <!-- basic info  -->
      <h2>Basic Info</h2>

      <!-- label for full name of user  -->
      <div>
        <label for="fullName" class="form-label">Full Name</label>
      </div>
      <input type="text" name="fullName" id="fullName" class="form-control" />

      <!-- email input Box of user -->
      <div>
        <label for="email" class="form-label">Email</label>
      </div>
      <input type="text" name="email" id="email" class="form-control" />

      <!-- drop down of doctors -->
      <div>
        <label for="doctor">Doctor</label>
      </div>
      <select name="doctor" id="doctor" class="form-select">
        <option value="" selected>Select your doctor</option>
        <option value="JOHN_HOPKINS">Dr. John Hopkins</option>
        <option value="MAYA_MARIN">Dr. Maya Marin</option>
        <option value="DONNA_DOUGLAS">Dr. Donna</option>
      </select>

      <!-- radio button (choices ) of location  -->

      <div id="location">
        <label for="location">Where ? </label>
        <div>
          <input
            type="radio"
            name="location"
            class="form-check-input"
            value="GOOGLE_MEET"
            id="google"
          />
          <label for="" class="form-check-label">Google Meet</label>
        </div>
        <div>
          <input
            type="radio"
            name="location"
            class="form-check-input"
            value="PHONE"
            id="phone"
          />
          <label for="" class="form-check-label">Phone</label>
        </div>
      </div>

      <!-- date and time input together  -->
      <div>
        <label for="date">When ? </label>
      </div>
      <input type="datetime-local" class="form-control" id="date" name="date" />

      <!-- submit button for form user - data -->
      <hr />
      <button type="submit" j class="btn btn-primary">Confirm Booking</button>
    </form>
    <script>
      const formElement = document.getElementById("user-data");

      
      const data = {
        fullName: null,
        email: null,
        doctor: null,
        location: null,
        date: null,
      };

      // add event listener on full name box  with id  = "fullName"
      const fullName = document.getElementById("fullName");
      fullName.addEventListener("input", (e) => {
        data.fullName = e.target.value;
        // console.log(data);
      });

      // add even listener on email box with id = 'email'

      const email = document.getElementById("email");
      email.addEventListener("input", (e) => {
        data.email = e.target.value;
        // console.log(data);
      });

      // add event listener on doctor select box with id = 'doctor'

      const doctor = document.getElementById("doctor");

      doctor.addEventListener("input", (e) => {
        data.doctor = e.target.value;
        // console.log(data);
      });

      // add event listener on google radio option with id = 'google'

      const googleMeet = document.getElementById("google");
      googleMeet.addEventListener("click", (e) => {
        data.location = e.target.value;
        // console.log(data);
      });

      // add event listener on phone radio option with id = 'phone'
      const phoneMeet = document.getElementById("phone");
      phoneMeet.addEventListener("click", (e) => {
        data.location = e.target.value;
        // console.log(data);
      });

      // add event listener on date input with id = 'date'
      const date = document.getElementById("date");

      date.addEventListener("input", (e) => {
        data.date = new Date(e.target.value);
      });

      // add event listener on submit button

      formElement.addEventListener("submit", (e) => {
        e.preventDefault();

        console.log(data);
        makeRequest(data);
      });

      // create a function makeRequest(data) that sends the data to the given url

      function makeRequest(data) {
        const url = "https://jsonplaceholder.typicode.com/posts";

        fetch(url, {
          method: "POST",
          body: JSON.stringify(data),
          headers: {
            "Content-Type": "application/json",
            // 'Content-Type': 'application/x-www-form-urlencoded',
          },
        });
      }
    </script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
